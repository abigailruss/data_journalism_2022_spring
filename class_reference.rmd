---
title: "Class Reference"
author: "Abigail Russ"
output:
  html_document:
    theme: cerulean
    highlight: pygments
    toc: true
    toc_float:
      collapsed: true
      smooth_scroll: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

Things I learned on Jan. 27
Working Directory: To set the working directory click on more and click set working directory. That tells R where we'll be working from. Here's the code for it: setwd("~/Desktop/JOUR 472/data_journalism_2022_spring")

```{r} 
install.packages("tidyverse")
```
```{r}
library(tidyverse)
```
The library function loads an R library such as the tidyverse, providing     access to the verbs and functions that library contains. You have to load a library before you can use its functions.

Code is written with 3 
``` {r} 
new line run the line of code then the next line 3 
```

Name a Variable: 
```{r}
number <- 2
name <- "Abigail"
```

Multiply Numbers:
```{r}
number * number
```

Glimpse ()-  gives a sense of the data, some of the values in each field/variable/column, and the data types of each field/variable/column.

```{r}
glimpse(ppp_maryland_loans)
```

Examine data "head"
codeblock to use head() examines the first six rows of data. Explore the data by clicking the black arrow on the right side of the output table, allowing you to examine additional columns.
```{r}
head(ppp_maryland_loans)
```

Group and count
group the ppp_maryland_loans dataframe by the county for each loan, and then count the number of loans in that group.

start with ppp loans and then group by project county nameand then summarize count up each number of loans in each bucket
```{r}
ppp_maryland_loans %>%  
  group_by(project_county_name) %>% 
  summarise(
    count_loans = n()
  )
```
Mean, Median, Minimum, Maximum
```{r}
ppp_maryland_loans %>%
  group_by(project_county_name) %>%
  summarise(
    count_loans = n(),
    total_loans_amount = sum(amount),
    mean_loan_amount = mean(amount),
    median_loan_amount = median(amount),
    min_loan_amount = min(amount),
    max_loan_amount = max(amount)
  ) %>%
  arrange(desc(max_loan_amount))
```

Mutate-- allows you to add to your data

Filter-- reduce the data you're looking at to meet a certain criteria
(look at only the actual counties in WV)
    when you only want to see a subset that matches some criteria 
    `filter(COLUMN_NAME OPERATOR CRITERIA)`
    filter(project_county_name == "PRINCE GEORGES")
    
```{r}
prince_georges <- maryland_ppp %>% filter(project_county_name == "PRINCE GEORGES")
head(prince_georges)
```

Dates-- have their own data type of date comparisons 
  lubridate is for dates
  
read_csv means that its reading in a csv file (it can even be in a zip file that I don't have to unzip first)

head()-  gives you the first 6 rows of the data (the top of the file)

summary()-- gives min, median mean max for every column 

colnames()- list of column names

glimpse()- a quick look at the columns, data types and some examples of the data

add a new column based on an existing column- use mutate
```{r}
maryland_ppp %>%
  select(loan_number, amount, payroll_proceed) %>% #select says what you want to see 
  #mutate(new_column = value)
  mutate(percent_payroll = payroll_proceed/amount
)
```

if its inside maryland use if/else
```{r}
# if/else example
maryland_with_in_out <- maryland_ppp %>%
  mutate(
    in_out = if_else(
        servicing_lender_state == 'MD', "IN", "OUT"
      )
  )
```

Case When
want to add a column called jobs retained category
populate it based on the value of jobs retained
when its greater then or equal to 10 but less then 25 give it 25_to_50
```{r}
# case_when example
maryland_jobs_categories <- maryland_ppp %>%
mutate(
  jobs_retained_category = case_when(
    jobs_retained < 10 ~ 'under_10',
    jobs_retained >= 10 & jobs_retained < 25 ~ '10_to_25',
    jobs_retained >= 25 & jobs_retained < 50 ~ '25_to_50',
    jobs_retained >= 50 & jobs_retained < 100 ~ '50_to_100',
    jobs_retained >= 100 & jobs_retained < 250 ~ '100_to_250',
    jobs_retained >= 250 & jobs_retained < 500 ~ '250_to_500',
    jobs_retained == 500 ~ '500'
  )
)
```
